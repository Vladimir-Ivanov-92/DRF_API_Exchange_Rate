# DRF_API_Exchange_Rate 

Django проект, предоставляющий API для получения актуального курса доллара к рублю.

api/v1/get-current-usd/ - в json формате выводится информация о текущем курсе и предшествующих
10 значениях курса, начиная с наиболее актуального. 

Пример:
```bash
{
    "current_rate": 89.766607,
    "time": "2024-01-01 15:46:54",
    "last_10_rates": [
        {
            "index": 1,
            "time": "2024-01-01 15:25:30",
            "value": 89.786533
        },
        {
            "index": 2,
            "time": "2024-01-01 15:25:19",
            "value": 89.778995
        },
        
        ...
        
        {
            "index": 10,
            "time": "2024-01-01 15:23:54",
            "value": 89.766234
        }
    ]
}
```

Данные по курсу обновляются в фоновом режиме каждые 10 секунд. Для обработки задачи
в фоновом режиме используется Celery. Задача запускается при старте работы приложения.

### В данном проекте использовались следующие инструменты:

- python v3.11
- django v5.0.1
- djangorestframework v3.14
- celery v5.3.6
- redis v5.0.1
- requests v2.31

## Настройка и запуск:

Перейдите в директорию, в которую будете клонировать репозиторий. 
Необходимо наличие установленного и запущенного Docker.
Для скачивания репозитория и разворачивания проекта локально в docker контейнере 
(создание БД, запуск приложения):
git clone https://github.com/Vladimir-Ivanov-92/DRF_API_Exchange_Rate.git

Необходимо создать в текущей директории .env файл 
и заполнить данными по образцу .env.example

Для автоматизации сборки проекта в репозитории размещен Makefile. Для запуска приложения
выполните: 

```
make up  - создаст два Docker контейнера "app" и "redis"
make start_app - выполнит миграции БД, запустит Celery и добавит фоновую задачу по 
отправке запросов и получению значений обменного курса.
```

